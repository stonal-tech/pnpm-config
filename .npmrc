# ðŸ”’ Secure .npmrc configuration for pnpm migration
# Epic: STN-46123
# Maximum security settings to prevent supply chain attacks

# ================================
# SECURITY SETTINGS
# ================================

# Disable automatic script execution (CRITICAL for security)
ignore-scripts=true
enable-pre-post-scripts=false

# Strict dependency management
shamefully-hoist=false
hoist-pattern=[]
strict-peer-dependencies=true
auto-install-peers=false

# Security audit settings
audit-level=moderate

# ================================
# REGISTRY CONFIGURATION
# ================================

# Default registry for all packages
registry=https://registry.npmjs.org/

# AWS CodeArtifact configuration for organization namespaces
# Note: These URLs will be configured after AWS CodeArtifact login
# Run: aws codeartifact login --tool npm --domain lfn-artifactory --domain-owner 983974232060 --repository avatar --namespace @stonal-tech --namespace @lfn --namespace @stonal --namespace @lfn-tech

@stonal-tech:registry=${CODEARTIFACT_URL}
@lfn:registry=${CODEARTIFACT_URL}
@stonal:registry=${CODEARTIFACT_URL}
@lfn-tech:registry=${CODEARTIFACT_URL}

# CodeArtifact authentication
//lfn-artifactory-983974232060.d.codeartifact.eu-west-1.amazonaws.com/npm/avatar/:always-auth=true

# ================================
# PERFORMANCE SETTINGS
# ================================

# Store configuration
store-dir=~/.pnpm-store
cache-dir=~/.pnpm-cache

# Network settings
fetch-retries=3
fetch-retry-mintimeout=10000
fetch-retry-maxtimeout=60000

# ================================
# DEVELOPMENT SETTINGS
# ================================

# Progress and logging
progress=true
reporter=default
loglevel=warn

# Save exact versions
save-exact=false
save-prefix=^

# Node.js settings
engine-strict=true
node-version=>=22.19.0

# ================================
# SECURITY NOTES
# ================================
# This configuration prioritizes security over convenience:
# 1. ignore-scripts=true prevents malicious script execution
# 2. strict-peer-dependencies=true prevents phantom dependencies
# 3. shamefully-hoist=false maintains strict isolation
# 4. Organization packages use secure CodeArtifact registry
# 5. Public packages use official npm registry with integrity checks